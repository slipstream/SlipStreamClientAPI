<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>sixsq.slipstream.client.api.lib.run documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">com.sixsq.slipstream/SlipStreamClientAPI-jar</span> <span class="project-version">3.4-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>SlipStream Clojure Client API</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sixsq</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slipstream</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.authn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authn</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.cimi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cimi</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.impl.cimi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cimi</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.impl.crud.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.impl.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>lib</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.lib.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-6 current"><a href="sixsq.slipstream.client.api.lib.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.run.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.http-async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-async</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.utils.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-aborted.3F"><div class="inner"><span>aborted?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-failure"><div class="inner"><span>action-failure</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-result"><div class="inner"><span>action-result</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-scale-down-at"><div class="inner"><span>action-scale-down-at</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-scale-down-by"><div class="inner"><span>action-scale-down-by</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-scale-up"><div class="inner"><span>action-scale-up</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-success"><div class="inner"><span>action-success</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-action-success.3F"><div class="inner"><span>action-success?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-can-scale.3F"><div class="inner"><span>can-scale?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-cancel-abort"><div class="inner"><span>cancel-abort</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-abort"><div class="inner"><span>get-abort</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-comp-ids"><div class="inner"><span>get-comp-ids</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-multiplicity"><div class="inner"><span>get-multiplicity</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-param"><div class="inner"><span>get-param</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-run-info"><div class="inner"><span>get-run-info</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-scale-state"><div class="inner"><span>get-scale-state</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-get-state"><div class="inner"><span>get-state</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-scalable.3F"><div class="inner"><span>scalable?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-scale-down"><div class="inner"><span>scale-down</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-scale-up"><div class="inner"><span>scale-up</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-set-param"><div class="inner"><span>set-param</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-set-params"><div class="inner"><span>set-params</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-take-last-n-ids"><div class="inner"><span>take-last-n-ids</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-terminate"><div class="inner"><span>terminate</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-wait-ready"><div class="inner"><span>wait-ready</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.lib.run.html#var-wait-timeout-default"><div class="inner"><span>wait-timeout-default</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">sixsq.slipstream.client.api.lib.run</h1><div class="doc"><div class="markdown"><h2><a href="#purpose" name="purpose"></a>Purpose</h2>
<p>The <code>run</code> namespace contains functions for interacting with SlipStream runs.</p>
<p>It allows users to</p>
<ul>
  <li>Scale the components of the running application up and down,</li>
  <li>Query the state of the run,</li>
  <li>Query and set parameters of the application components and their instances,</li>
  <li>Query parameters from global namespace (<code>ss:</code>), and</li>
  <li>Terminate the run.</li>
</ul>
<p>Timeouts and intervals are in seconds.</p>
<h2><a href="#slipstream-run-termininology" name="slipstream-run-termininology"></a>SlipStream run termininology</h2>
<p>There are three types of parameters on a run</p>
<ul>
  <li>Global parameter - <code>ss:tags</code></li>
  <li>Application component parameter - <code>webapp:ids</code></li>
  <li>Application component instance parameter - <code>webapp.1:hostname</code></li>
</ul>
<p>where</p>
<ul>
  <li><code>ss</code> is the global namespace of the run,</li>
  <li><code>webapp</code> is the name of the application component, which is refered to as <code>comp</code>  in the API,</li>
  <li><code>webapp.1</code> is the name of the instance <code>1</code> of the application component <code>webapp</code>.</li>
</ul>
<h2><a href="#usage-and-examples" name="usage-and-examples"></a>Usage and examples</h2>
<p>Use <a href="sixsq.slipstream.client.api.authn.html#var-login">login</a> and/or <a href="sixsq.slipstream.client.api.authn.html#var-login.21">login!</a> to get token or alter API global authenticantion context.</p>
<pre><code>(require '[sixsq.slipstream.client.api.authn :as a])
(require '[sixsq.slipstream.client.api.lib.run :as r])

;;
;; Login to the library default SlipStream service and globally set
;; authentication context.

(a/login! "user" "pass")
(r/get-run-info "123-456")

;;
;; Change context and query a number of runs.

(def my-slipstream {:serviceurl "https://example.com"
                    :cookie (a/login "jay" "random" "https://example.com")}
(def runs ["253194ea-f982-4e1e-881e-7642408eae21"
           "b0271dff-773e-4f4b-9915-c3cd3ec8bcb0"
           "253194ea-f982-4e1e-881e-7642408eae21"])
(for [run-uuid runs]
  (a/with-context my-slipstream (r/get-run-info run-uuid)))
</code></pre></div></div><div class="public anchor" id="var-aborted.3F"><h3>aborted?</h3><div class="usage"><code>(aborted? run-uuid)</code></div><div class="doc"><pre class="plaintext">Check if run is in 'Aborted' state.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L132">view source</a></div></div><div class="public anchor" id="var-action-failure"><h3>action-failure</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L225">view source</a></div></div><div class="public anchor" id="var-action-result"><h3>action-result</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L235">view source</a></div></div><div class="public anchor" id="var-action-scale-down-at"><h3>action-scale-down-at</h3><div class="usage"><code>(action-scale-down-at run-uuid comp ids &amp; [&amp; {:keys [timeout], :or {timeout wait-timeout-default}}])</code></div><div class="doc"><pre class="plaintext">Scale down application component 'comp' by terminating the component
instances identified by IDs in 'ids'. Wait for the completion of the action.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L290">view source</a></div></div><div class="public anchor" id="var-action-scale-down-by"><h3>action-scale-down-by</h3><div class="usage"><code>(action-scale-down-by run-uuid comp n &amp; [&amp; {:keys [timeout], :or {timeout wait-timeout-default}}])</code></div><div class="doc"><pre class="plaintext">Scale down application component 'comp' by 'n' instances. Wait for
the completion of the action.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L281">view source</a></div></div><div class="public anchor" id="var-action-scale-up"><h3>action-scale-up</h3><div class="usage"><code>(action-scale-up run-uuid comp n &amp; [&amp; {:keys [params timeout], :or {params {}, timeout wait-timeout-default}}])</code></div><div class="doc"><pre class="plaintext">Scale application component 'comp' by 'n' instances up.  Wait for the
completion of the action. Optionally provide map of parameters as 'params'.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L268">view source</a></div></div><div class="public anchor" id="var-action-success"><h3>action-success</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L224">view source</a></div></div><div class="public anchor" id="var-action-success.3F"><h3>action-success?</h3><div class="usage"><code>(action-success? result)</code></div><div class="doc"><pre class="plaintext">Given the 'result' returned by an action, check if it was successfull.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L263">view source</a></div></div><div class="public anchor" id="var-can-scale.3F"><h3>can-scale?</h3><div class="usage"><code>(can-scale? run-uuid)</code></div><div class="doc"><pre class="plaintext">Check if it's possible to scale the run.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L146">view source</a></div></div><div class="public anchor" id="var-cancel-abort"><h3>cancel-abort</h3><div class="usage"><code>(cancel-abort run-uuid)</code></div><div class="doc"><pre class="plaintext">Cancel abort on the run.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L169">view source</a></div></div><div class="public anchor" id="var-get-abort"><h3>get-abort</h3><div class="usage"><code>(get-abort run-uuid)</code></div><div class="doc"><pre class="plaintext">Get abort message.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L108">view source</a></div></div><div class="public anchor" id="var-get-comp-ids"><h3>get-comp-ids</h3><div class="usage"><code>(get-comp-ids run-uuid comp)</code></div><div class="doc"><pre class="plaintext">Get list of instance IDs of application component 'comp'.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L120">view source</a></div></div><div class="public anchor" id="var-get-multiplicity"><h3>get-multiplicity</h3><div class="usage"><code>(get-multiplicity run-uuid comp)</code></div><div class="doc"><pre class="plaintext">Get multiplicity of application component 'comp'.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L115">view source</a></div></div><div class="public anchor" id="var-get-param"><h3>get-param</h3><div class="usage"><code>(get-param run-uuid comp id param &amp; [req])</code></div><div class="doc"><div class="markdown"><p>Get parameter ‘param’ of application component instance ‘comp.id’ in run <code>run-uuid</code> as ‘run-uuid/comp.id:param’. When ‘id’ is nil, gets parameter of the application component as ‘run-uuid/comp:param’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L75">view source</a></div></div><div class="public anchor" id="var-get-run-info"><h3>get-run-info</h3><div class="usage"><code>(get-run-info run-uuid)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L156">view source</a></div></div><div class="public anchor" id="var-get-scale-state"><h3>get-scale-state</h3><div class="usage"><code>(get-scale-state run-uuid comp id)</code></div><div class="doc"><pre class="plaintext">Get scale state of the component instance.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L97">view source</a></div></div><div class="public anchor" id="var-get-state"><h3>get-state</h3><div class="usage"><code>(get-state run-uuid)</code></div><div class="doc"><pre class="plaintext">Get state of the run.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L102">view source</a></div></div><div class="public anchor" id="var-scalable.3F"><h3>scalable?</h3><div class="usage"><code>(scalable? run-uuid)</code></div><div class="doc"><pre class="plaintext">Check if run is scalable.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L137">view source</a></div></div><div class="public anchor" id="var-scale-down"><h3>scale-down</h3><div class="usage"><code>(scale-down run-uuid comp ids)</code></div><div class="doc"><pre class="plaintext">Scale down application component 'comp' by terminating instances defined by
'ids' vector.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L198">view source</a></div></div><div class="public anchor" id="var-scale-up"><h3>scale-up</h3><div class="usage"><code>(scale-up run-uuid comp n)</code><code>(scale-up run-uuid comp n params)</code></div><div class="doc"><pre class="plaintext">Scale up application component 'comp' by 'n' instances. Allow to set parameters
from 'params' map on the new component instances. Returns list of added component
instance names qualified with IDs.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L181">view source</a></div></div><div class="public anchor" id="var-set-param"><h3>set-param</h3><div class="usage"><code>(set-param run-uuid comp id param value &amp; [req])</code></div><div class="doc"><pre class="plaintext">Set parameter 'param' to 'value' on application component instance 'comp.id'.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L83">view source</a></div></div><div class="public anchor" id="var-set-params"><h3>set-params</h3><div class="usage"><code>(set-params run-uuid comp id params &amp; [req])</code></div><div class="doc"><pre class="plaintext">Given a map of parameters 'params', set them on application component
instance 'run-uuid/comp.id'.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L89">view source</a></div></div><div class="public anchor" id="var-take-last-n-ids"><h3>take-last-n-ids</h3><div class="usage"><code>(take-last-n-ids run-uuid comp n)</code></div><div class="doc"><pre class="plaintext">Returns the last 'n' IDs of the currently running instances of application
component 'comp'.</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L275">view source</a></div></div><div class="public anchor" id="var-terminate"><h3>terminate</h3><div class="usage"><code>(terminate run-uuid)</code></div><div class="doc"><pre class="plaintext">Terminate the run.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L175">view source</a></div></div><div class="public anchor" id="var-wait-ready"><h3>wait-ready</h3><div class="usage"><code>(wait-ready run-uuid)</code><code>(wait-ready run-uuid timeout)</code></div><div class="doc"><pre class="plaintext">Waits for Ready state on the run. Returns true on success.
</pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L215">view source</a></div></div><div class="public anchor" id="var-wait-timeout-default"><h3>wait-timeout-default</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/lib/run.clj#L167">view source</a></div></div></div></body></html>