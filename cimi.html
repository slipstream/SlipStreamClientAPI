<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>CIMI API</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">com.sixsq.slipstream/SlipStreamClientAPI-jar</span> <span class="project-version">3.38-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="cimi.html"><div class="inner"><span>CIMI API</span></div></a></li><li class="depth-1 "><a href="legal.html"><div class="inner"><span>Legal Information</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sixsq</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slipstream</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.authn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authn</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.cimi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cimi</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.deprecated-authn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deprecated-authn</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.modules.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>modules</span></div></a></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.pricing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pricing</span></div></a></li><li class="depth-5"><a href="sixsq.slipstream.client.api.runs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>runs</span></div></a></li><li class="depth-4 branch"><a href="sixsq.slipstream.client.async.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-4 branch"><a href="sixsq.slipstream.client.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-4"><a href="sixsq.slipstream.client.sync.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sync</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#cimi-api" name="cimi-api"></a>CIMI API</h1>
<p>The SlipStream API is migrating from a custom REST API to the <a href="https://www.dmtf.org/standards/cloud">CIMI</a> standard from <a href="http://dmtf.org">DMTF</a>. All recent additions to the resource model already follow the CIMI REST interface.</p>
<h2><a href="#usage" name="usage"></a>Usage</h2>
<p>The CIMI search (search), create (add), read (get), update (edit), and delete (delete) operations are defined in the <code>cimi</code> protocol in the <code>sixsq.slipstream.client.api.cimi</code> namespace. A separate namespace <code>sixsq.slipstream.client.api.authn</code> wraps some of the CIMI functions to simplify the authentication process. </p>
<p>To use the CIMI and authn protocol functions, you must instantiate either a synchronous or asynchronous implementation of those protocols. The synchronous implementation directly returns the results of the functions, while the asynchronous implementation always returns a core.async channel.</p>
<pre><code class="clojure">;; Demonstrating use from the REPL

(require '[sixsq.slipstream.client.api.cimi :as cimi])
(require '[sixsq.slipstream.client.api.authn :as authn])
(require '[sixsq.slipstream.client.async :as async])
(require '[sixsq.slipstream.client.sync :as sync])
(require '[clojure.core.async :refer [&lt;!! close!]])
(require '[kvlt.core :as kvlt])

;; Turn off logging from underlying HTTP library to keep the noise down.
(kvlt/quiet!)

;; Create an asynchronous client context.  The asynchronous client
;; can be used from Clojure or ClojureScript.
(def client-async (async/instance))
;; #'boot.user/client-async

;; Returns a channel on which a document with directory of available
;; resource is pushed. User does not need to be authenticated.
(pprint (&lt;!! (cimi/cloud-entry-point client-async)))
;; {:baseURI "https://nuv.la/api/",
;;  :connectors {:href "connector"},
;; ...


;; Returns a channel with login status (HTTP code).
(def username "user") ;; replace with real value
(def password "pass") ;; replace with real value
(pprint (&lt;!! (authn/login client-async {:href "session-template/internal"
                                        :username username
                                        :password password})))
;; {:status 201,
;;  :message "created session/884000e0-94a2-44af-9598-135060347557",
;;  :resource-id "session/884000e0-94a2-44af-9598-135060347557"}

;; Returns channel with document containing list of events.
(pprint (&lt;!! (cimi/search client-async "events")))

;; {:count 7254,
;;  :resourceURI "http://schemas.dmtf.org/cimi/2/EventCollection",
;;  :id "event",
;;  ...


;; Same can be done with synchronous client, but in this case
;; all values are directly returned, rather than being pushed
;; onto a channel.  The synchronous client is only available 
;; in Clojure!

(def client-sync (sync/instance))
(pprint (authn/login client-sync {:href "session-template/internal"
                                  :username username
                                  :password password}))
                                  
;; {:status 201,
;;  :message "created session/45824c04-d454-4474-b3e6-4fdbb6389613",
;;  :resource-id "session/45824c04-d454-4474-b3e6-4fdbb6389613"}

(pprint (cimi/search client-sync "events" {:$last 2}))

;; {:count 7254,
;;  :resourceURI "http://schemas.dmtf.org/cimi/2/EventCollection",
;;  :id "event",
;;  ...

</code></pre>
<p>When creating the client context without specific endpoints, then the endpoints for the Nuvla service will be used. See the API documentation for details on specifying the endpoints or other options. </p></div></div></div></body></html>