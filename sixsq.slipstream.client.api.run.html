<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>sixsq.slipstream.client.api.run documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">com.sixsq.slipstream/SlipStreamClientAPI-jar</span> <span class="project-version">3.10-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="cimi.html"><div class="inner"><span>CIMI API</span></div></a></li><li class="depth-1 "><a href="legacy.html"><div class="inner"><span>Legacy REST API</span></div></a></li><li class="depth-1 "><a href="legal.html"><div class="inner"><span>Legal Information</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sixsq</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slipstream</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-5 branch"><a href="sixsq.slipstream.client.api.authn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authn</span></div></a></li><li class="depth-5"><a href="sixsq.slipstream.client.api.cimi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cimi</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.cimi.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.cimi.impl-async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl-async</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.cimi.sync.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sync</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.cimi.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.impl.crud.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crud</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.impl.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>lib</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.lib.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.lib.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5 branch current"><a href="sixsq.slipstream.client.api.run.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.http-async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-async</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.http-sync.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-sync</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.http-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http-utils</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-6 branch"><a href="sixsq.slipstream.client.api.utils.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-6"><a href="sixsq.slipstream.client.api.utils.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-*context*"><div class="inner"><span>*context*</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-aborted.3F"><div class="inner"><span>aborted?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-action-scale-down-at"><div class="inner"><span>action-scale-down-at</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-action-scale-down-by"><div class="inner"><span>action-scale-down-by</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-action-scale-up"><div class="inner"><span>action-scale-up</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-action-success.3F"><div class="inner"><span>action-success?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-can-scale.3F"><div class="inner"><span>can-scale?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-cancel-abort"><div class="inner"><span>cancel-abort</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-contextualize.21"><div class="inner"><span>contextualize!</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-abort"><div class="inner"><span>get-abort</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-comp-ids"><div class="inner"><span>get-comp-ids</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-multiplicity"><div class="inner"><span>get-multiplicity</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-param"><div class="inner"><span>get-param</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-run-info"><div class="inner"><span>get-run-info</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-scale-state"><div class="inner"><span>get-scale-state</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-get-state"><div class="inner"><span>get-state</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-run-uuid"><div class="inner"><span>run-uuid</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-scalable.3F"><div class="inner"><span>scalable?</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-scale-down"><div class="inner"><span>scale-down</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-scale-up"><div class="inner"><span>scale-up</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-set-param"><div class="inner"><span>set-param</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-set-params"><div class="inner"><span>set-params</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-terminate"><div class="inner"><span>terminate</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-wait-ready"><div class="inner"><span>wait-ready</span></div></a></li><li class="depth-1"><a href="sixsq.slipstream.client.api.run.html#var-wait-timeout-default"><div class="inner"><span>wait-timeout-default</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">sixsq.slipstream.client.api.run</h1><div class="doc"><div class="markdown"><h2><a href="#purpose" name="purpose"></a>Purpose</h2>
<p>The <code>run</code> namespace contains functions for interacting with SlipStream runs.</p>
<p>It allows users to</p>
<ul>
  <li>Scale the components of the running application up and down,</li>
  <li>Query the state of the run,</li>
  <li>Query and set parameters of the application components and their instances,</li>
  <li>Query parameters from global namespace (<code>ss:</code>), and</li>
  <li>Terminate the run.</li>
</ul>
<p>Timeouts and intervals are in seconds.</p>
<h1><a href="#slipstraem-run-termininology" name="slipstraem-run-termininology"></a>SlipStraem run termininology</h1>
<p>There are three types of parameters on a run</p>
<ul>
  <li>Global parameter - <code>ss:tags</code></li>
  <li>Application component parameter - <code>webapp:ids</code></li>
  <li>Application component instance parameter - <code>webapp.1:hostname</code></li>
</ul>
<p>where</p>
<ul>
  <li><code>ss</code> is the global namespace of the run,</li>
  <li><code>webapp</code> is the name of the application component, which is referred to as <code>comp</code>  in the API,</li>
  <li><code>webapp.1</code> is the name of the instance <code>1</code> of the application component <code>webapp</code>.</li>
</ul>
<h2><a href="#usage-and-examples" name="usage-and-examples"></a>Usage and examples</h2>
<p>The namespace can be bootstrapped either from <code>slipstream.context</code> file (in .ini format) or by explicitly providing the configuration to <code>contextualize!</code>.</p>
<p>In the case of <code>slipstream.context</code>, the following structure and parameters are assumed</p>
<pre><code>[contextualization]

# SlipStream endpoint.
serviceurl = https://nuv.la

# SlipStream user credentials
username = foo
password = bar

# preferred over username and password
cookie = key=val; Path:/

# run UUID
diid = 123
</code></pre>
<p>This file is usually available on SlipStream managed VMs and is used by orchestrator and node executors.</p>
<p>First call to any of the API functions searches and loads the contextualisation file. All successive calls use the locally bound configuration.</p>
<p>Explicitly calling <code>contextualize!</code> w/o parameters reload the contextualization and updates the configuration of the namespace.</p>
<p><code>contextualize!</code> can be called with a context map</p>
<pre><code>{:serviceurl "https://nuv.la"

 ;; run UUID
 :diid "123"

 :cookie "key=val; Path:/"

 :username "foo"
 :password "bar"}
</code></pre>
<p>where either <code>:cookie</code> or <code>:username</code> and <code>:password</code> are mandatory.</p>
<h3><a href="#examples" name="examples"></a>Examples</h3>
<p>Implicit bootstrap – <code>slipstream.context</code> with the correct parameters should be in the search path.</p>
<pre><code>(require '[sixsq.slipstream.client.api.run :as r])

(r/get-run-info)
</code></pre>
<p>Manually define configuration and contextualize the namespace.</p>
<pre><code>(require '[sixsq.slipstream.client.api.run :as r])

(def conf {:serviceurl "https://nuv.la"
           :diid "123-456"
           :username "foo"
           :password "bar"})
(rw/contextualize! conf)

(r/get-run-info)
</code></pre></div></div><div class="public anchor" id="var-*context*"><h3>*context*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L104">view source</a></div></div><div class="public anchor" id="var-aborted.3F"><h3>aborted?</h3><div class="usage"><code>(aborted?)</code></div><div class="doc"><div class="markdown"><p>Check if run is in ‘Aborted’ state.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L168">view source</a></div></div><div class="public anchor" id="var-action-scale-down-at"><h3>action-scale-down-at</h3><div class="usage"><code>(action-scale-down-at comp ids &amp; [&amp; {:keys [timeout], :or {timeout wait-timeout-default}}])</code></div><div class="doc"><div class="markdown"><p>Scale down application component ‘comp’ by terminating the component instances identified by IDs in ‘ids’. Wait for the completion of the action.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L246">view source</a></div></div><div class="public anchor" id="var-action-scale-down-by"><h3>action-scale-down-by</h3><div class="usage"><code>(action-scale-down-by comp n &amp; [&amp; {:keys [timeout], :or {timeout wait-timeout-default}}])</code></div><div class="doc"><div class="markdown"><p>Scale down application component ‘comp’ by ‘n’ instances. Wait for the completion of the action.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L239">view source</a></div></div><div class="public anchor" id="var-action-scale-up"><h3>action-scale-up</h3><div class="usage"><code>(action-scale-up comp n &amp; [&amp; {:keys [params timeout], :or {params {}, timeout wait-timeout-default}}])</code></div><div class="doc"><div class="markdown"><p>Scale application component ‘comp’ by ‘n’ instances up. Wait for the completion of the action. Optionally provide map of parameters as ‘params’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L232">view source</a></div></div><div class="public anchor" id="var-action-success.3F"><h3>action-success?</h3><div class="usage"><code>(action-success? result)</code></div><div class="doc"><div class="markdown"><p>Given the ‘result’ returned by an action, check if it was successfull.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L189">view source</a></div></div><div class="public anchor" id="var-can-scale.3F"><h3>can-scale?</h3><div class="usage"><code>(can-scale?)</code></div><div class="doc"><div class="markdown"><p>Check if it’s possible to scale the run.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L178">view source</a></div></div><div class="public anchor" id="var-cancel-abort"><h3>cancel-abort</h3><div class="usage"><code>(cancel-abort)</code></div><div class="doc"><div class="markdown"><p>Cancel abort on the run.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L198">view source</a></div></div><div class="public anchor" id="var-contextualize.21"><h3>contextualize!</h3><div class="usage"><code>(contextualize!)</code><code>(contextualize! context)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L106">view source</a></div></div><div class="public anchor" id="var-get-abort"><h3>get-abort</h3><div class="usage"><code>(get-abort)</code></div><div class="doc"><div class="markdown"><p>Get abort message.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L151">view source</a></div></div><div class="public anchor" id="var-get-comp-ids"><h3>get-comp-ids</h3><div class="usage"><code>(get-comp-ids comp)</code></div><div class="doc"><div class="markdown"><p>Get list of instance IDs of application component ‘comp’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L161">view source</a></div></div><div class="public anchor" id="var-get-multiplicity"><h3>get-multiplicity</h3><div class="usage"><code>(get-multiplicity comp)</code></div><div class="doc"><div class="markdown"><p>Get multiplicity of application component ‘comp’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L156">view source</a></div></div><div class="public anchor" id="var-get-param"><h3>get-param</h3><div class="usage"><code>(get-param comp id param)</code></div><div class="doc"><div class="markdown"><p>Get parameter ‘param’ of application component instance ‘comp.id’ as ‘comp.id:param’. When ‘id’ is nil, gets parameter of the application component as ‘comp:param’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L124">view source</a></div></div><div class="public anchor" id="var-get-run-info"><h3>get-run-info</h3><div class="usage"><code>(get-run-info)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L185">view source</a></div></div><div class="public anchor" id="var-get-scale-state"><h3>get-scale-state</h3><div class="usage"><code>(get-scale-state comp id)</code></div><div class="doc"><div class="markdown"><p>Get scale state of the component instance.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L141">view source</a></div></div><div class="public anchor" id="var-get-state"><h3>get-state</h3><div class="usage"><code>(get-state)</code></div><div class="doc"><div class="markdown"><p>Get state of the run.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L146">view source</a></div></div><div class="public anchor" id="var-run-uuid"><h3>run-uuid</h3><div class="usage"><code>(run-uuid)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L114">view source</a></div></div><div class="public anchor" id="var-scalable.3F"><h3>scalable?</h3><div class="usage"><code>(scalable?)</code></div><div class="doc"><div class="markdown"><p>Check if run is scalable.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L173">view source</a></div></div><div class="public anchor" id="var-scale-down"><h3>scale-down</h3><div class="usage"><code>(scale-down comp ids)</code></div><div class="doc"><div class="markdown"><p>Scale down application component ‘comp’ by terminating instances defined by ‘ids’ vector.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L217">view source</a></div></div><div class="public anchor" id="var-scale-up"><h3>scale-up</h3><div class="usage"><code>(scale-up comp n)</code><code>(scale-up comp n params)</code></div><div class="doc"><div class="markdown"><p>Scale up application component ‘comp’ by ‘n’ instances. Allow to set parameters from ‘params’ map on the new component instances. Returns list of added component instance names qualified with IDs.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L208">view source</a></div></div><div class="public anchor" id="var-set-param"><h3>set-param</h3><div class="usage"><code>(set-param comp id param value)</code></div><div class="doc"><div class="markdown"><p>Set parameter ‘param’ to ‘value’ on application component instance ‘comp.id’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L130">view source</a></div></div><div class="public anchor" id="var-set-params"><h3>set-params</h3><div class="usage"><code>(set-params comp id params)</code></div><div class="doc"><div class="markdown"><p>Given a map of parameters ‘params’, set them on application component instance ‘comp.id’.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L135">view source</a></div></div><div class="public anchor" id="var-terminate"><h3>terminate</h3><div class="usage"><code>(terminate)</code></div><div class="doc"><div class="markdown"><p>Terminate the run.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L203">view source</a></div></div><div class="public anchor" id="var-wait-ready"><h3>wait-ready</h3><div class="usage"><code>(wait-ready)</code><code>(wait-ready timeout)</code></div><div class="doc"><div class="markdown"><p>Waits for Ready state on the run. Returns true on success.</p></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L223">view source</a></div></div><div class="public anchor" id="var-wait-timeout-default"><h3>wait-timeout-default</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/slipstream/SlipStreamClientAPI/blob/master/jar/src/clj/sixsq/slipstream/client/api/run.clj#L196">view source</a></div></div></div></body></html>